# Архитектура проекта

## Фаза 1.
![phase1](pictures/phase1.png)
## Фаза 2.
![phase2](pictures/phase2.png)

## Описание компонентов

* IContentReader - интерфейс, предоставляющий метод getContent(), который возвращает запрос пользователя.


* ConsoleContentReader - класс, реализующий интерфейс IContentReader. Он предоставляет пользовательский запрос, введенный из командной строки


* `VariablesSubstitutor`
    - *(фаза 2)* класс, предоставляющий метод `String substitute(String content, Context context)`, который принимает строчку с запросом пользователя и возвращает преобразованную корректную строчку, совершив все подстановки (`$`). Заметки по реализации:
        + Нужно посимвольно читать ввод (или иначе эмулировать следующие правила), сохраняя текущее состояние (нет кавычек/находимся в одинарных кавычках/находимся в двойных кавычках)
        + Без кавычек (стандартное) - можем войти в любое из следующих состояний, подставляем при `$`
        + При одинарных кавычках - запоминаем состояние и игнорируем подстановки. Можем только выйти из состояния в стандартное.
        + При двойных кавычках - запоминаем состояние и подставляем при `$`. Можем только выйти из состояния в стандартное.


* `ContentParser` 
    - *(фаза 1)* класс, предоставляющий метод `List<ICLIEntity> parse(String content, Context context)`, который принимает строчку с запросом пользователя и `context` (который просто прокидывается дальше),возвращает список сущностей `ICLIEntity`, для создания которых он использует `CLIEntityCreator`. Заметки по реализации:
        + Разделяем строку по пробелам вне кавычек. Создаём сущности через `ICLIEntity`, следуя правилам ниже
        + Начало строки - **keyword**
        + После **keyword** и до конца строки - **arguments**
        + **binary** считается **keyword** на этом этапе
        + Если нет такого **keyword** (в том числе **binary**), который мы получили - считаем, что это **initialization** 

    - *(фаза 2)* класс, предоставляющий метод `List<ICLIEntity> parse(String content, Context context)`, который принимает преобразованную `VariablesSubsitutor` строчку с запросом пользователя и `context` (который просто прокидывается дальше), возвращает список сущностей `ICLIEntity`, для создания которых он использует `CLIEntityCreator`. Заметки по реализации:
        + Разделяем строку по пробелам и **|** вне кавычек. Создаём сущности через `ICLIEntity`, следуя правилам ниже
        + Начало строки или после **|** - **keyword**
        + После **keyword** и до конца строки или **|** - **arguments**
        + **binary** считается **keyword** на этом этапе
        + Если нет такого **keyword** (в том числе **binary**), который мы получили - считаем, что это **initialization** 


* `CLIEntityCreator`
    - *(фаза 1)* класс, предоставляющий методы по созданию сущностей `Initialization`, `Argument`, `Keyword`. `Keyword` пробрасывает `context` дальше, делегирует создание конкретной сущности `KeywordCreator`
    - *(фаза 2)* класс, предоставляющий методы по созданию сущностей `Initialization`, `Argument`, `Pipeline`, `Keyword`. `Keyword` пробрасывает `context` дальше, делегирует создание конкретной сущности `KeywordCreator`


* `KeywordCreator` 
    - *(фаза 1)* класс, создаёт по строке и `context` соответствующий `IKeyword` и возвращает его
    - *(фаза 2)* класс, создаёт по строке и `context` соответствующий `IKeyword` и возвращает его


* `CatExecutor`
    - *(фаза 1)* класс, выполняющий команду `cat`. В реализации считывает содержание файла, переданного на вход первым аргументом и выводит его.
    - *(фаза 2)* класс, выполняющий команду `cat`. В реализации считывает содержание файла, переданного на вход первым аргументом и выводит его.

* `EchoExecutor`
    - *(фаза 1)* класс, выполняющий команду `echo`. Принимает список аргументов *IArgument*, каждый из которых последовательно выводит.
    - *(фаза 2)* класс, выполняющий команду `echo`. Принимает список аргументов *IArgument*, каждый из которых последовательно выводит.


* `PwdExecutor`
    - *(фаза 1)* класс, выполняющий команду `pwd`. Получает текущую директорию из *KeyWordCreator* и выводит ее.
    - *(фаза 1)* класс, выполняющий команду `pwd`. Получает текущую директорию из *KeyWordCreator* и выводит ее.


* `WCExecutor`
    - *(фаза 1)* класс, выполняющий команду `wc`. Принимает первым аргументом файл, по которому после считывания определяет количество строк, слов и байт.
    - *(фаза 1)* класс, выполняющий команду `wc`. Принимает первым аргументом файл, по которому после считывания определяет количество строк, слов и байт.